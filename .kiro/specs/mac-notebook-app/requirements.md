# 需求文檔

## 介紹

這個功能是開發一個基於 Golang 和 Fyne 的 Mac 筆記本應用程式。該應用支援 Markdown 格式的筆記編輯，具備檔案管理、加密保護和自動保存等功能，為用戶提供安全且便利的筆記管理體驗。

## 需求

### 需求 1 - Markdown 筆記編輯

**用戶故事：** 作為一個筆記用戶，我希望能夠使用 Markdown 格式編寫和編輯筆記，以便我能夠創建結構化和格式化的內容。

#### 驗收標準

1. WHEN 用戶創建新筆記 THEN 系統 SHALL 提供 Markdown 編輯器界面
2. WHEN 用戶輸入 Markdown 語法 THEN 系統 SHALL 即時預覽格式化效果
3. WHEN 用戶保存筆記 THEN 系統 SHALL 將內容保存為 .md 檔案格式
4. WHEN 用戶開啟現有 .md 檔案 THEN 系統 SHALL 正確載入並顯示 Markdown 內容

### 需求 2 - 檔案保存位置管理

**用戶故事：** 作為一個筆記用戶，我希望能夠指定筆記的保存位置，以便我能夠按照自己的檔案組織方式管理筆記。

#### 驗收標準

1. WHEN 用戶創建新筆記 THEN 系統 SHALL 允許用戶選擇保存位置
2. WHEN 用戶選擇保存位置 THEN 系統 SHALL 提供檔案瀏覽器對話框
3. WHEN 用戶指定檔案名稱 THEN 系統 SHALL 自動添加 .md 副檔名（如果未提供）
4. WHEN 保存位置不存在 THEN 系統 SHALL 提示用戶並允許創建目錄

### 需求 3 - 檔案與資料夾管理

**用戶故事：** 作為一個筆記用戶，我希望能夠在應用內管理檔案和資料夾，以便我能夠有效組織我的筆記。

#### 驗收標準

1. WHEN 用戶開啟應用 THEN 系統 SHALL 顯示檔案樹狀結構
2. WHEN 用戶右鍵點擊資料夾 THEN 系統 SHALL 提供創建新檔案和新資料夾選項
3. WHEN 用戶拖拽檔案 THEN 系統 SHALL 允許移動檔案到不同資料夾
4. WHEN 用戶刪除檔案或資料夾 THEN 系統 SHALL 要求確認並執行刪除操作
5. WHEN 用戶重新命名檔案 THEN 系統 SHALL 更新檔案名稱並保持內容不變

### 需求 4 - 密碼加密功能

**用戶故事：** 作為一個注重隱私的用戶，我希望能夠為每個筆記檔案設定獨立的密碼保護，以便我能夠保護敏感內容。

#### 驗收標準

1. WHEN 用戶選擇加密檔案 THEN 系統 SHALL 提示輸入密碼
2. WHEN 用戶設定密碼 THEN 系統 SHALL 使用指定的加密演算法加密檔案內容
3. WHEN 用戶開啟加密檔案 THEN 系統 SHALL 要求輸入正確密碼
4. IF 密碼錯誤 THEN 系統 SHALL 拒絕存取並顯示錯誤訊息
5. WHEN 用戶修改加密檔案 THEN 系統 SHALL 保持加密狀態

### 需求 5 - 生物驗證加密

**用戶故事：** 作為一個 Mac 用戶，我希望能夠使用 Touch ID 或 Face ID 來保護我的筆記，以便我能夠快速且安全地存取內容。

#### 驗收標準

1. WHEN 用戶啟用生物驗證 THEN 系統 SHALL 檢查 Mac 設備的生物驗證可用性
2. WHEN 生物驗證可用 THEN 系統 SHALL 提供 Touch ID/Face ID 選項
3. WHEN 用戶選擇生物驗證保護 THEN 系統 SHALL 為該檔案啟用生物驗證
4. WHEN 用戶開啟生物驗證保護的檔案 THEN 系統 SHALL 要求生物驗證
5. IF 生物驗證失敗 THEN 系統 SHALL 提供密碼備用選項

### 需求 6 - 加密演算法設定

**用戶故事：** 作為一個技術用戶，我希望能夠選擇加密演算法，以便我能夠根據安全需求選擇適當的加密強度。

#### 驗收標準

1. WHEN 用戶開啟設定 THEN 系統 SHALL 顯示可用的加密演算法選項
2. WHEN 用戶選擇加密演算法 THEN 系統 SHALL 將其設為全域預設值
3. WHEN 創建新的加密檔案 THEN 系統 SHALL 使用當前設定的加密演算法
4. WHEN 用戶變更加密演算法 THEN 系統 SHALL 提示是否重新加密現有檔案
5. IF 系統支援多種演算法 THEN 系統 SHALL 提供 AES-256、ChaCha20-Poly1305 等選項

### 需求 7 - 自動保存功能

**用戶故事：** 作為一個筆記用戶，我希望系統能夠自動保存我的工作，以便我不會因為忘記保存而丟失內容。

#### 驗收標準

1. WHEN 用戶編輯筆記內容 THEN 系統 SHALL 在指定時間間隔後自動保存
2. WHEN 檔案已加密 THEN 系統 SHALL 定時自動保存加密內容
3. WHEN 自動保存觸發 THEN 系統 SHALL 在背景執行而不中斷用戶操作
4. WHEN 自動保存完成 THEN 系統 SHALL 顯示保存狀態指示器
5. IF 自動保存失敗 THEN 系統 SHALL 通知用戶並提供手動保存選項
6. WHEN 用戶設定自動保存間隔 THEN 系統 SHALL 允許自訂保存頻率（1-60 分鐘）
